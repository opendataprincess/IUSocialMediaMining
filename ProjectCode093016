Copyright Laura Kahn
10-7-16

#From the windows command
pip-install pyquery

import got3
import csv

#ESCASEZ
#Set caracas wide escasez search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch("escasez geocode:10.4806,-66.9036,10km")
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")e
scasez_c_tweets = got3.manager.TweetManager.getTweets(tweetCriteria)
for x in escasez_c_tweets:    
    print(x.text, x.date, x.favorites, x.retweets)    
    print("*"* 50)

#Transform Tweets to List using Pandas

# Need to initialize an empty list to collect tweetsextracted_data = []
for tweet in escasez_c_tweets:    
    tid = tweet.id    
#date_created = tweet.created_at    
    date_created = tweet.date    
#favorite_count = tweet.favorite_count    
    favorite_count = tweet.favorites    
#retweet_count = tweet.retweet_count    
    retweet_count = tweet.retweets    
    text = tweet.text    
#escasez_c_tweets = [tid, hour_created, text, favorite_count, retweet_count]    
# escasez_c_tweets is an existing object - it's the list of tweet objects    # from GOT. 
We don't want to assign the data to escasez_c_tweets    
this_tweet_extracted_information = [tid, date_created, text, favorite_count, retweet_count]    
# tweetCriteria.append(escasez_c_tweets)   
# tweetCriteria is the tweet criteria object, not a list we can append to   
# I made an empty list above (line 2) the for loop to contain our tweet extracted info    
extracted_data.append(this_tweet_extracted_information)

# Argument to DataFrame is extracted_data, the list # of lists containing extracted]
datadf = pd.DataFrame(extracted_data)
# df.columns = ["tid", "date_created", "favorite_count", "retweet_count", "text"]
# The name of the columns should correspond to order that we designated for each tweet
# This occurs in line 16 in the above cell.df.columns = ["tid", "date_created", "text", "favorite_count", "retweet_count"]
df.index = df["tid"]
del df["tid"]

#HAMBRE
#Set caracas wide hambre search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch("hambre geocode:10.4806,-66.9036,10km")
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
escasez_h_tweets = got3.manager.TweetManager.getTweets(tweetCriteria)
for x in escasez_h_tweets:        
     print(x.text, x.date, x.favorites, x.retweets)        
     print("*"* 50)

#ANAQUELESVACIOS

 
#Convert text to CSV for processing: https://bytes.com/topic/python/answers/856037-need-help-converting-text-csv-format

#Save Streaming Twitter Data to CSV
http://stackoverflow.com/questions/22599103/save-streaming-twitter-data-to-csv

#Narrowing search terms to each of the five municipalities in Caracas, Venezuela
#set Libertador leche search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('leche geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
leche_libertador_tweets = got3.manager.TweetManager.getTweets(tweetCriteria)

for x in leche_libertador_tweets:
    print(x.text)
    print(x.date)
    print(x.retweets)
    
#Set Chacao leche data search criteria
tweetCriteria.setQuerySearch('leche geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta leche search criteria
tweetCriteria.setQuerySearch('leche geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo leche search criteria
tweetCriteria.setQuerySearch('leche geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre leche search criteria
tweetCriteria.setQuerySearch('leche geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#ARROZ
#Set caracas wide arroz search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('arroz geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador arroz search criteria
tweetCriteria.setQuerySearch('arroz, geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao arroz data search criteria
tweetCriteria.setQuerySearch('harina, geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta arroz search criteria
tweetCriteria.setQuerySearch('arroz geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo arroz search criteria
tweetCriteria.setQuerySearch('arroz geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre arroz search criteria
tweetCriteria.setQuerySearch('arroz geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#HARINA
#Set caracas wide harina search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('harina geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador harina search criteria
tweetCriteria.setQuerySearch('harina geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao harina data search criteria
tweetCriteria.setQuerySearch('harina geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta harina search criteria
tweetCriteria.setQuerySearch('harina geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo harina search criteria
tweetCriteria.setQuerySearch('harina geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre harina search criteria
tweetCriteria.setQuerySearch('harina geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#PAN
#Set Caracas wide pan search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('pan geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador pan search criteria
tweetCriteria.setQuerySearch('pan geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao pan data search criteria
tweetCriteria.setQuerySearch('pan geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta pan search criteria
tweetCriteria.setQuerySearch('pan geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo pan search criteria
tweetCriteria.setQuerySearch('pan geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre pan search criteria
tweetCriteria.setQuerySearch('pan geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#AZUCAR
#Set Caracas wide azucar search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('azucar geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador azucar search criteria
tweetCriteria.setQuerySearch('azucar geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao azucar data search criteria
tweetCriteria.setQuerySearch('azucar geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta azucar search criteria
tweetCriteria.setQuerySearch('azucar geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo azucar search criteria
tweetCriteria.setQuerySearch('azucar geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre azucar search criteria
tweetCriteria.setQuerySearch('azucar geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#QUESO
#Set Caracas wide queso search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('queso geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador queso search criteria
tweetCriteria.setQuerySearch('queso geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao queso data search criteria
tweetCriteria.setQuerySearch('queso geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta queso search criteria
tweetCriteria.setQuerySearch('queso geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo queso search criteria
tweetCriteria.setQuerySearch('queso geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre queso search criteria
tweetCriteria.setQuerySearch('queso geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#POLLO
#Set caracas wide pollo search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('pollo geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador pollo search criteria
tweetCriteria.setQuerySearch('pollo, geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao pollo data search criteria
tweetCriteria.setQuerySearch('pollo, geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta pollo search criteria
tweetCriteria.setQuerySearch('pollo geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo pollo search criteria
tweetCriteria.setQuerySearch('pollo geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre pollo search criteria
tweetCriteria.setQuerySearch('pollo geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#CARNE
#Set caracas wide carne search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('carne geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador carne search criteria
tweetCriteria.setQuerySearch('carne, geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao carne data search criteria
tweetCriteria.setQuerySearch('carne, geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta carne search criteria
tweetCriteria.setQuerySearch('carne geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo carne search criteria
tweetCriteria.setQuerySearch('carne geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre carne search criteria
tweetCriteria.setQuerySearch('carne geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#ACEITE
#Set caracas wide aceite search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('aceite geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador aceite search criteria
tweetCriteria.setQuerySearch('aceite, geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao aceite data search criteria
tweetCriteria.setQuerySearch('aceite, geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta aceite search criteria
tweetCriteria.setQuerySearch('aceite geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo aceite search criteria
tweetCriteria.setQuerySearch('aceite geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre aceite search criteria
tweetCriteria.setQuerySearch('aceite geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#MARGARINA
#Set caracas wide margarina search criteria
tweetCriteria = got3.manager.TweetCriteria()
tweetCriteria.setQuerySearch('margarina geocode: 10.4806, 66.9036, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Libertador margarina search criteria
tweetCriteria.setQuerySearch('margarina, geocode: 10.4776, 66.9273, 10 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Chacao margarina data search criteria
tweetCriteria.setQuerySearch('margarina, geocode: 10.4979, 66.8499, 4 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Set Baruta margarina search criteria
tweetCriteria.setQuerySearch('margarina geocode: 10.3788, 66.8522, 5 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Hatillo margarina search criteria
tweetCriteria.setQuerySearch('margarina geocode: 10.4151, 66.7963, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#set Sucre margarina search criteria
tweetCriteria.setQuerySearch('margarina geocode: 10.4776, 66.9273, 6 km')
tweetCriteria.setSince("2014-12-01")
tweetCriteria.setUntil("2016-09-30")
tweetCriteria.setMaxTweets(1000)

#Get Caracas-wide leche data results
leche_caracas_tweets = got3.manager.TweetManager.getTweets(tweetCriteria)
for x in leche_caracas_tweets:
print(x.text)
print(x.date)
print(x.geo)
